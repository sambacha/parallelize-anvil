const mod=require("module"),realLoad=mod._load,wrappers={};let wrappingBlocked=!1;function fixModule(e,o,a){let d=wrappers[e];if(!d)return a;{wrappingBlocked=!!d.shouldBlockWrapping&&[];let l=d.wrap(a)||a;return l!==a&&mod._cache[o]&&mod._cache[o].exports&&(mod._cache[o].exports=l),wrappingBlocked&&(wrappingBlocked.forEach(function(e){fixModule(e.requestedName,e.filename,e.loadedModule)}),wrappingBlocked=!1),l}}mod._load=function(e,o,a){let d=mod._resolveFilename(e,o,a),l=realLoad.apply(this,arguments);return process.env.ANVIL_INJECTION_ACTIVE&&(!1!==wrappingBlocked?wrappingBlocked.push({requestedName:e,filename:d,loadedModule:l}):l=fixModule(e,d,l)),l},module.exports=function e(o,a,d){wrappers[o]={wrap:a,shouldBlockWrapping:d||!1}};