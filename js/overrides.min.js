const globalAgent=require("global-agent"),monkeyPatching=(globalAgent.bootstrap(),require("./monkey-patching")),nodeJSVersion=(monkeyPatching("undici",e=>{var t,n=process.env.HTTP_PROXY;n&&(t=e.ProxyAgent,e=e.setGlobalDispatcher,t)&&e&&e(new t(n))}),monkeyPatching("stripe",i=>{if(!i.PATCHED_PROXYMAN)return Object.assign(function(){var e,t=!i.DEFAULT_HOST,n=require("https").globalAgent;return t?([t,e]=arguments,e={...e,httpAgent:n},i.call(this,t,e)):((t=i.apply(this,arguments)).setHttpAgent(n),t)},i,{PATCHED_PROXYMAN:!0})}),parseInt(process.version.slice(1).split(".")[0],10));(18<=nodeJSVersion||global.fetch)&&require("undici");